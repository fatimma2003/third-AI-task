# -*- coding: utf-8 -*-
"""Untitled1.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1RYjagBwjWgefIh1lA0uKfQMPi_uYTSTs
"""

!pip install -q git+https://github.com/openai/whisper.git
!sudo apt update && sudo apt install -y ffmpeg

from google.colab import files
uploaded = files.upload()

import whisper

# ØªØ­Ù…ÙŠÙ„ Ù†Ù…ÙˆØ°Ø¬ Whisper
model = whisper.load_model("base")  # ÙÙŠÙ‡ Ø®ÙŠØ§Ø±Ø§Øª Ø«Ø§Ù†ÙŠØ© Ø²ÙŠ "small", "medium", "large"

# ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„ØµÙˆØªÙŠ Ø¥Ù„Ù‰ Ù†Øµ
filename = list(uploaded.keys())[0]  # Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù„ÙŠ Ø±ÙØ¹ØªÙŠÙ‡
result=model.transcribe(filename, language="ar")  # Ù†Ø­Ø¯Ø¯ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©

# Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù†Øµ Ø§Ù„Ù†Ø§ØªØ¬
print("ğŸ“ Ø§Ù„Ù†Øµ Ø§Ù„Ù…Ø­ÙˆÙ‘Ù„:", result['text'])

!pip install openai

!pip install cohere

import cohere

# ğŸ”‘ Ø­Ø·ÙŠ Ù…ÙØªØ§Ø­Ùƒ Ù‡Ù†Ø§
co = cohere.Client("wb95Vsxw6tUlVQGlg8rSQpA4ikepK4p2dLraZOfx")

# ğŸ“ Ù‡Ù†Ø§ Ø¨Ù†Ø­Ø· Ø§Ù„Ù†Øµ Ø§Ù„Ù„ÙŠ Ø·Ù„Ø¹ Ù…Ù† Whisper (Ù…Ø«Ù„Ø§Ù‹)
user_input = result['text']

# âœ¨ ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø±Ø¯ Ù…Ù† Cohere
response = co.generate(
    model='command-r-plus',  # ØªÙ‚Ø¯Ø± ØªØºÙŠØ±ÙŠÙ† Ù„Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù…ØªØ§Ø­ Ø¹Ù†Ø¯Ùƒ
    prompt=f"Ø±Ø¯ Ø¨Ù„ØºØ© Ù„Ø·ÙŠÙØ© Ø¹Ù„Ù‰: {user_input}",
    max_tokens=100
)

# ğŸ“¢ Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø±Ø¯
reply = response.generations[0].text.strip()
print("ğŸ¤– Ø±Ø¯ Cohere:", reply)

!pip install gTTS

from gtts import gTTS
from IPython.display import Audio

tts = gTTS(reply, lang='ar')
tts.save("response.mp3")
Audio("response.mp3", autoplay=True)